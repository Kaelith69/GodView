<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 820 520" width="820" height="520" role="img" aria-label="GodView Architecture Diagram">
  <defs>
    <radialGradient id="archBg" cx="50%" cy="0%" r="90%">
      <stop offset="0%" stop-color="#1a1033"/>
      <stop offset="100%" stop-color="#09090b"/>
    </radialGradient>
    <marker id="aArr" markerWidth="9" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 9 3.5, 0 7" fill="#52525b"/>
    </marker>
    <marker id="aArrRose" markerWidth="9" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 9 3.5, 0 7" fill="#f43f5e"/>
    </marker>
    <marker id="aArrViolet" markerWidth="9" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 9 3.5, 0 7" fill="#8b5cf6"/>
    </marker>
    <marker id="aArrAmber" markerWidth="9" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 9 3.5, 0 7" fill="#fb923c"/>
    </marker>
    <marker id="aArrGreen" markerWidth="9" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 9 3.5, 0 7" fill="#10b981"/>
    </marker>
    <filter id="archGlow">
      <feGaussianBlur stdDeviation="2" result="blur"/>
      <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="820" height="520" rx="16" fill="url(#archBg)"/>

  <!-- Title -->
  <text x="410" y="30" font-family="system-ui, sans-serif" font-size="11" fill="#52525b" text-anchor="middle" font-weight="600" letter-spacing="2.5">GODVIEW — MODULE ARCHITECTURE</text>

  <!-- ─── Layer 0: Host Page ─── -->
  <rect x="290" y="45" width="240" height="48" rx="10" fill="rgba(37,99,235,0.12)" stroke="#2563eb" stroke-width="1.5"/>
  <text x="410" y="65" font-family="system-ui" font-size="12" fill="#60a5fa" text-anchor="middle" font-weight="700">Host Page</text>
  <text x="410" y="83" font-family="monospace" font-size="10" fill="#52525b" text-anchor="middle">index.html · &lt;div id="godview-app"&gt;</text>

  <!-- Arrow Host → GodView -->
  <line x1="410" y1="93" x2="410" y2="118" stroke="#52525b" stroke-width="1.5" marker-end="url(#aArr)"/>
  <text x="416" y="110" font-family="monospace" font-size="9" fill="#52525b">new GodView(config)</text>

  <!-- ─── Layer 1: GodView Class ─── -->
  <rect x="260" y="120" width="300" height="54" rx="10" fill="rgba(244,63,94,0.14)" stroke="#f43f5e" stroke-width="2" filter="url(#archGlow)"/>
  <text x="410" y="143" font-family="system-ui" font-size="14" fill="#fb7185" text-anchor="middle" font-weight="800">GodView Class</text>
  <text x="410" y="163" font-family="monospace" font-size="10" fill="#71717a" text-anchor="middle">constructor(config) · init() · render()</text>

  <!-- Arrows from GodView to 3 subsystems -->
  <line x1="336" y1="174" x2="195" y2="230" stroke="#fb923c" stroke-width="1.5" stroke-dasharray="5,3" marker-end="url(#aArrAmber)"/>
  <line x1="410" y1="174" x2="410" y2="230" stroke="#f43f5e" stroke-width="1.5" stroke-dasharray="5,3" marker-end="url(#aArrRose)"/>
  <line x1="484" y1="174" x2="620" y2="230" stroke="#8b5cf6" stroke-width="1.5" stroke-dasharray="5,3" marker-end="url(#aArrViolet)"/>

  <!-- ─── Layer 2: Three subsystems ─── -->

  <!-- Auth Layer -->
  <rect x="80" y="232" width="200" height="58" rx="10" fill="rgba(251,146,60,0.11)" stroke="#fb923c" stroke-width="1.5"/>
  <text x="180" y="254" font-family="system-ui" font-size="12" fill="#fb923c" text-anchor="middle" font-weight="700">Auth Layer</text>
  <text x="180" y="271" font-family="monospace" font-size="9.5" fill="#52525b" text-anchor="middle">checkAuth() · handleLogin()</text>
  <text x="180" y="283" font-family="monospace" font-size="9" fill="#52525b" text-anchor="middle">handleLogout()</text>

  <!-- Render Engine -->
  <rect x="310" y="232" width="200" height="58" rx="10" fill="rgba(244,63,94,0.12)" stroke="#f43f5e" stroke-width="1.5"/>
  <text x="410" y="254" font-family="system-ui" font-size="12" fill="#fb7185" text-anchor="middle" font-weight="700">Render Engine</text>
  <text x="410" y="271" font-family="monospace" font-size="9.5" fill="#52525b" text-anchor="middle">renderDashboard() · render()</text>
  <text x="410" y="283" font-family="monospace" font-size="9" fill="#52525b" text-anchor="middle">refreshData()</text>

  <!-- Data Layer -->
  <rect x="540" y="232" width="200" height="58" rx="10" fill="rgba(139,92,246,0.11)" stroke="#8b5cf6" stroke-width="1.5"/>
  <text x="640" y="254" font-family="system-ui" font-size="12" fill="#a78bfa" text-anchor="middle" font-weight="700">Data Layer</text>
  <text x="640" y="271" font-family="monospace" font-size="9.5" fill="#52525b" text-anchor="middle">fetchData() · fetchDataFn()</text>
  <text x="640" y="283" font-family="monospace" font-size="9" fill="#52525b" text-anchor="middle">generateMockData()</text>

  <!-- Arrows: Auth → sessionStorage -->
  <line x1="130" y1="290" x2="100" y2="330" stroke="#fb923c" stroke-width="1" stroke-dasharray="4,3" marker-end="url(#aArrAmber)"/>

  <!-- sessionStorage box -->
  <rect x="30" y="332" width="140" height="40" rx="8" fill="rgba(251,146,60,0.08)" stroke="rgba(251,146,60,0.35)" stroke-width="1"/>
  <text x="100" y="350" font-family="system-ui" font-size="10" fill="#fb923c" text-anchor="middle">sessionStorage</text>
  <text x="100" y="365" font-family="monospace" font-size="8.5" fill="#52525b" text-anchor="middle">godview_auth_&lt;id&gt;</text>

  <!-- Arrows: Render → sub-components -->
  <line x1="360" y1="290" x2="310" y2="340" stroke="#52525b" stroke-width="1" stroke-dasharray="4,3" marker-end="url(#aArr)"/>
  <line x1="385" y1="290" x2="370" y2="340" stroke="#52525b" stroke-width="1" stroke-dasharray="4,3" marker-end="url(#aArr)"/>
  <line x1="435" y1="290" x2="450" y2="340" stroke="#52525b" stroke-width="1" stroke-dasharray="4,3" marker-end="url(#aArr)"/>
  <line x1="460" y1="290" x2="495" y2="340" stroke="#52525b" stroke-width="1" stroke-dasharray="4,3" marker-end="url(#aArr)"/>

  <!-- Sub-components row -->
  <!-- Map -->
  <rect x="220" y="342" width="115" height="46" rx="8" fill="rgba(16,185,129,0.1)" stroke="#10b981" stroke-width="1"/>
  <text x="277" y="362" font-family="system-ui" font-size="11" fill="#34d399" text-anchor="middle" font-weight="600">Map View</text>
  <text x="277" y="378" font-family="monospace" font-size="8.5" fill="#52525b" text-anchor="middle">Leaflet.js</text>

  <!-- Stat Cards -->
  <rect x="345" y="342" width="115" height="46" rx="8" fill="rgba(244,63,94,0.09)" stroke="#f43f5e" stroke-width="1"/>
  <text x="402" y="362" font-family="system-ui" font-size="11" fill="#fb7185" text-anchor="middle" font-weight="600">Stat Cards</text>
  <text x="402" y="378" font-family="monospace" font-size="8.5" fill="#52525b" text-anchor="middle">stat.fn(data)</text>

  <!-- Data Cards -->
  <rect x="470" y="342" width="115" height="46" rx="8" fill="rgba(139,92,246,0.09)" stroke="#8b5cf6" stroke-width="1"/>
  <text x="527" y="362" font-family="system-ui" font-size="11" fill="#a78bfa" text-anchor="middle" font-weight="600">Data Cards</text>
  <text x="527" y="378" font-family="monospace" font-size="8.5" fill="#52525b" text-anchor="middle">schema + filter</text>

  <!-- CSV Export -->
  <rect x="595" y="342" width="115" height="46" rx="8" fill="rgba(251,146,60,0.09)" stroke="#fb923c" stroke-width="1"/>
  <text x="652" y="362" font-family="system-ui" font-size="11" fill="#fb923c" text-anchor="middle" font-weight="600">CSV Export</text>
  <text x="652" y="378" font-family="monospace" font-size="8.5" fill="#52525b" text-anchor="middle">Blob + anchor</text>

  <!-- Arrow: Data layer → state -->
  <line x1="640" y1="290" x2="640" y2="330" stroke="#8b5cf6" stroke-width="1" stroke-dasharray="4,3" marker-end="url(#aArrViolet)"/>

  <!-- State box -->
  <rect x="565" y="332" width="150" height="40" rx="8" fill="rgba(139,92,246,0.08)" stroke="rgba(139,92,246,0.35)" stroke-width="1"/>
  <text x="640" y="350" font-family="system-ui" font-size="10" fill="#a78bfa" text-anchor="middle">this.state</text>
  <text x="640" y="365" font-family="monospace" font-size="8.5" fill="#52525b" text-anchor="middle">data[ ] · markers[ ] · query</text>

  <!-- CSS note, connected to render engine with faint line -->
  <line x1="410" y1="174" x2="756" y2="342" stroke="rgba(161,161,170,0.2)" stroke-width="1" stroke-dasharray="4,3"/>
  <rect x="710" y="342" width="90" height="46" rx="8" fill="rgba(161,161,170,0.07)" stroke="rgba(161,161,170,0.2)" stroke-width="1"/>
  <text x="755" y="362" font-family="system-ui" font-size="10" fill="#a1a1aa" text-anchor="middle">godview.css</text>
  <text x="755" y="378" font-family="monospace" font-size="8.5" fill="#52525b" text-anchor="middle">scoped styles</text>

  <!-- Leaflet CDN note -->
  <line x1="277" y1="388" x2="180" y2="430" stroke="rgba(16,185,129,0.3)" stroke-width="1" stroke-dasharray="4,3" marker-end="url(#aArrGreen)"/>
  <rect x="70" y="432" width="220" height="38" rx="8" fill="rgba(16,185,129,0.07)" stroke="rgba(16,185,129,0.25)" stroke-width="1"/>
  <text x="180" y="450" font-family="system-ui" font-size="10" fill="#34d399" text-anchor="middle">Leaflet CDN / Self-hosted</text>
  <text x="180" y="463" font-family="monospace" font-size="8.5" fill="#52525b" text-anchor="middle">unpkg.com/leaflet@1.9.4</text>

  <!-- CartoDB tiles note -->
  <line x1="277" y1="388" x2="420" y2="430" stroke="rgba(16,185,129,0.2)" stroke-width="1" stroke-dasharray="4,3" marker-end="url(#aArrGreen)"/>
  <rect x="320" y="432" width="200" height="38" rx="8" fill="rgba(16,185,129,0.05)" stroke="rgba(16,185,129,0.2)" stroke-width="1"/>
  <text x="420" y="450" font-family="system-ui" font-size="10" fill="#34d399" text-anchor="middle">CartoDB Dark Tiles</text>
  <text x="420" y="463" font-family="monospace" font-size="8.5" fill="#52525b" text-anchor="middle">basemaps.cartocdn.com</text>

  <!-- Legend -->
  <rect x="22" y="488" width="10" height="10" rx="2" fill="#fb923c"/>
  <text x="38" y="498" font-family="system-ui" font-size="10" fill="#71717a">Auth</text>
  <rect x="82" y="488" width="10" height="10" rx="2" fill="#f43f5e"/>
  <text x="98" y="498" font-family="system-ui" font-size="10" fill="#71717a">Render</text>
  <rect x="158" y="488" width="10" height="10" rx="2" fill="#8b5cf6"/>
  <text x="174" y="498" font-family="system-ui" font-size="10" fill="#71717a">Data</text>
  <rect x="222" y="488" width="10" height="10" rx="2" fill="#10b981"/>
  <text x="238" y="498" font-family="system-ui" font-size="10" fill="#71717a">External</text>
  <rect x="302" y="488" width="10" height="10" rx="2" fill="#2563eb"/>
  <text x="318" y="498" font-family="system-ui" font-size="10" fill="#71717a">Host</text>
  <rect x="362" y="488" width="10" height="10" rx="2" fill="#a1a1aa"/>
  <text x="378" y="498" font-family="system-ui" font-size="10" fill="#71717a">Style</text>
</svg>
